#!/usr/bin/make -f

#export DH_VERBOSE=1

%:
	dh $@

override_dh_auto_configure:
	dh_auto_configure -- --disable-libcanberra --disable-libgconf
	# qt client has a separate build-system
	( cd qt && qmake-qt4 qtr.pro )

override_dh_auto_build:
	dh_auto_build
	( cd qt && $(MAKE) )

override_dh_auto_clean:
	[ ! -f qt/Makefile ] || ( cd qt && $(MAKE) clean )
	dh_auto_clean

override_dh_installchangelogs:
	dh_installchangelogs -p transmission-common NEWS
override_dh_installdocs:
	dh_installdocs -p transmission-common
override_dh_installexamples:
	dh_installexamples -p transmission-common

override_dh_auto_install:
	dh_auto_install
	( cd qt && INSTALL_ROOT=$(CURDIR)/debian/tmp/usr $(MAKE) install )
	# clean RPATH from transmission binary (costela - 2007-10-27)
	#chrpath -d $(CURDIR)/debian/tmp/usr/bin/transmission
	#chrpath -d $(CURDIR)/debian/tmp/usr/bin/transmission-daemon
	#chrpath -d $(CURDIR)/debian/tmp/usr/bin/transmission-remote
	#chrpath -d $(CURDIR)/debian/tmp/usr/bin/transmissioncli

